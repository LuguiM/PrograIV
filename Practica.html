<!DOCTYPE html><!-- Definicion de tipo de documento -->
<html lang="en"><!-- Apertura de la pagina html -->
<head><!-- Encabezado de la pagina html -->
    <meta charset="UTF-8"><!-- Codificacion de Caracteres especiales  -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><!-- IE -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
    <title>...APP ACADEMICA...</title>
</head>

<body><!-- Contenido de la pagina html -->
  
<div class="container" id="app">
  <div class="row">
    <div class="col-12 col-md-6">
      <div class="card border-primary" >
        <div class="card-header bg-primary text-white">Registro de Alumno</div>
        <div class="card-body">
          <form id="frmAlumno" @submit.prevent="guardarAlumno" @reset.prevent="nuevoAlumno()">
          <div class="row p-1">
            <div class="col-3 col-md-2">CODIGO:</div>
            <div class="col-9 col-md-3">
              <input class="form-control" type="text" v-model="alumno.codigo" name="txtCodigoAlumno" id="txtCodigoAlumno">
            </div>
          </div>
          <div class="row p-1">
            <div class="col-3 col-md-2">NOMBRE:</div>
            <div class="col col-md-6">
              <input class="form-control" v-model="alumno.nombre" type="text" name="txtNombreAlumno" id="txtNombreAlumno">
            </div>
          </div>
          <div class="row p-1">
            <div class="col-3 col-md-2">DIRECCION:</div>
            <div class="col col-md-6">
              <input class="form-control" v-model="alumno.direccion" type="text" name="txtDireccionAlumno" id="txtDireccionAlumno">
            </div>
          </div>
          <div class="row p-1">
            <div class="col-3 col-md-2">MUNICIPIO:</div>
            <div class="col col-md-6">
              <input class="form-control" v-model="alumno.municipio" type="text" name="txtMunicipioAlumno" id="txtMunicipioAlumno">
            </div>
          </div>
          <div class="row p-1">
            <div class="col-3 col-md-2">DEPARTAMENTO:</div>
            <div class="col col-md-6">
              <input class="form-control" v-model="alumno.departamento" type="text" name="txtDepartamentoAlumno" id="txtDepartamentoAlumno">
            </div>
          </div>
          <div class="row p-1">
            <div class="col-3 col-md-2">TELEFONO:</div>
            <div class="col col-md-6">
              <input class="form-control" v-model="alumno.telefono" type="text" name="txtTelefonoAlumno" id="txtTelefonoAlumno">
            </div>
          </div>
          <div class="row p-1">
            <div class="col-3 col-md-2">FECHA DE NACIMIENTO:</div>
            <div class="col col-md-6">
              <input class="form-control" v-model="alumno.nacimiento" type="date" name="txtNacimientoAlumno" id="txtNacimientoAlumno">
            </div>
          </div>
          <div class="row p-1">
            <div class="col-3 col-md-2">SEXO:</div>
            <div class="col col-md-6">
              <input class="form-control" v-model="alumno.sexo" type="text" name="txtSexoAlumno" id="txtSexoAlumno">
            </div>
          </div>
          <div class="row p-1">
            <div class="col col md-6">
              <input class="btn btn-success" type="submit" value="Guardar Datos">
            </div>
            <div class="col col md-6">
              <input class="btn btn-warning" type="reset" value="Nuevo Registro">
            </div>
          </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="card text-bg-light" >
        <div class="card-header" >CONSULTA DE ALUMNOS</div>
        <div class="card-body">
          <form>
            <table class="table table-dark table-hover">
              <thead>
                <tr>
                  <th>BUSCAR</th>
                  <th colspan="2"><input type="text" @keyup="listarAlumnos()" class="form-control" 
                    v-model="buscar" placeholder="Buscar por nombre"></th>
                </tr>
                <tr>
                  <th>CODIGO</th>
                  <th>NOMBRE</th>
                  <th>DIRECCION</th>
                  <th>MUNICIPIO</th>
                  <th>DEPARTAMENTO</th>
                  <th>TELEFONO</th>
                  <th>FECHA DE NACIMIENTO</th>
                  <th colspan="2">SEXO</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="alumno in alumnos" @click='modificarAlumno(alumno)' :key="alumno.idAlumno" >
                  <td>{{alumno.codigo}}</td>
                  <td>{{alumno.nombre}}</td>
                  <td>{{alumno.direccion}}</td>
                  <td>{{alumno.municipio}}</td>
                  <td>{{alumno.departamento}}</td>
                  <td>{{alumno.telefono}}</td>
                  <td>{{alumno.nacimiento}}</td>
                  <td>{{alumno.sexo}}</td>
                  <td><button @click.prevent="eliminarAlumno(alumno)" class="btn btn-danger">Eliminar</button></td>
                </tr>
              </tbody>
            </table>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<script>
  const {createApp} = Vue;
  createApp({
    data(){
      return{
        buscar:'',
        alumnos:[],
        accion: 'nuevo',
        alumno:{
          idAlumno:0,
          codigo:'',
          nombre:'',
          direccion:'',
          municipio:'',
          departamento:'',
          telefono:'',
          nacimiento:'',
          sexo:''
        }
      }
    },
    methods:{
      nuevoAlumno(){
        this.accion = 'nuevo';
        this.alumno.idAlumno = '';
        this.alumno.codigo = '';
        this.alumno.nombre = '';
        this.alumno.direccion = '';
        this.alumno.municipio = '';
        this.alumno.departamento = '';
        this.alumno.telefono = '';
        this.alumno.nacimiento = '';
        this.alumno.sexo = '';
      },
      modificarAlumno(alumno){
        this.accion = 'modificar';
        this.alumno = alumno;
        
      },
      guardarAlumno(){
        this.listarAlumnos();
        if(this.accion==='nuevo'){
          this.alumno.idAlumno = new Date().getTime().toString(16); //las cantidad milisegundo y lo convierte en hexadecimal
          this.alumnos.push(JSON.parse(JSON.stringify(this.alumno)));
        }else if(this.accion==='modificar'){
          //hacer la busqueda y modificar el registro
          let index = this.alumnos.findIndex(alumno=>alumno.idAlumno==this.alumno.idAlumno);
          this.alumnos[index] = JSON.parse(JSON.stringify(this.alumno));
        }else if(this.accion==='eliminar'){
          let index = this.alumnos.findIndex(alumno=>alumno.idAlumno==this.alumno.idAlumno);
          this.alumnos.splice(index, 1);
        }
        localStorage.setItem('alumnos',JSON.stringify(this.alumnos));
        this.nuevoAlumno();
      },
      eliminarAlumno(alumno){
        if(confirm(`Esta seguro de eliminar el docente ${alumno.nombre}?`)){
          this.accion = "eliminar";
          this.alumno = alumno;
          this.guardarAlumno();

        }
      },
      listarAlumnos(buscar = ''){
        this.alumnos = JSON.parse( localStorage.getItem('alumnos') ||  "[]" ).filter(alumno=>alumno.nombre.toLowerCase().indexOf(this.buscar.toLowerCase())>-1);
      }
    },
    created(){
      this.listarAlumnos();
    }
  }).mount('#app')
</script>
  
</body>
</html>